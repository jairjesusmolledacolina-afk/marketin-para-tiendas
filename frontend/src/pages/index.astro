--- 
import Header from '../components/Header.astro';
const API = import.meta.env.VITE_API_URL || 'http://localhost:4000';
--- 
<html lang=\"es\">
  <head>
    <meta charset=\"utf-8\" />
    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />
    <title>Productos — TiendasCoro</title>
    <link rel=\"stylesheet\" href=\"/src/styles/global.css\" />
  </head>
  <body>
    <Header />
    <main class=\"container\">
      <h1 class=\"text-2xl font-bold mb-4\">Productos</h1>
      <div id=\"products\" class=\"grid gap-4 grid-cols-1 md:grid-cols-2\"></div>
    </main>

    <script is:inline>
      (async () => {
        const apiBase = import.meta.env.VITE_API_URL || 'http://localhost:4000';
        try {
          const res = await fetch(${apiBase}/api/products);
          const data = await res.json();
          const container = document.getElementById('products');
          container.innerHTML = '';
          if (!Array.isArray(data) || data.length === 0) {
            container.innerHTML = '<div class=\"card\">No hay productos aún.</div>';
            return;
          }
          for (const p of data) {
            const el = document.createElement('div');
            el.className = 'card';
            el.innerHTML = 
              <h3 class=\"font-bold text-lg\"></h3>
              <p class=\"text-sm text-gray-600\"></p>
              <div class=\"mt-2 font-semibold\">$ </div>
              <div class=\"mt-2 text-xs text-gray-500\">Tienda: </div>
            ;
            container.appendChild(el);
          }
        } catch (err) {
          console.error(err);
          const container = document.getElementById('products');
          if (container) container.innerHTML = '<div class=\"card\">Error al cargar productos.</div>';
        }
      })();
    </script>
  </body>
</html>
